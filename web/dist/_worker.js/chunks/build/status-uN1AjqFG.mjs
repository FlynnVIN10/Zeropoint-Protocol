import{v as e,_ as t,f as o,u as a,m as r,t as s,a as n,b as i,c as u}from"./server.mjs";import{D as l}from"../nitro/nitro.mjs";import{l as d}from"../_/shared.esm-bundler.mjs";import{u as c}from"./asyncData-DoT6D3uG.mjs";import{k as f,v as p,q as m,x as h,l as b}from"../routes/renderer.mjs";import"node:buffer";import"node:process";import"cloudflare:workers";import"node:events";import"node:timers";function useRequestFetch(){var e;return(null==(e=function(e){var t;return e||(e=i()),null==(t=e.ssrContext)?void 0:t.event}())?void 0:e.$fetch)||globalThis.$fetch}const v=r(u.ui.strategy,u.ui.card,{base:"",background:"bg-white dark:bg-gray-900",divide:"divide-y divide-gray-200 dark:divide-gray-800",ring:"ring-1 ring-gray-200 dark:ring-gray-800",rounded:"rounded-lg",shadow:"shadow",body:{base:"",background:"",padding:"px-4 py-5 sm:p-6"},header:{base:"",background:"",padding:"px-4 py-5 sm:px-6"},footer:{base:"",background:"",padding:"px-4 py-4 sm:px-6"}}),g=e.defineComponent({inheritAttrs:!1,props:{as:{type:String,default:"div"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(t){const{ui:o,attrs:r}=a("card",e.toRef(t,"ui"),v),i=e.computed(()=>s(n(o.value.base,o.value.rounded,o.value.divide,o.value.ring,o.value.shadow,o.value.background),t.class));return{ui:o,attrs:r,cardClass:i}}});const y=g.setup;g.setup=(t,o)=>{const a=e.useSSRContext();return(a.modules||(a.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/layout/Card.vue"),y?y(t,o):void 0};const $=t(g,[["ssrRender",function(t,o,a,r,s,n,i,u){m(o,e.createVNode(e.resolveDynamicComponent(t.$attrs.onSubmit?"form":t.as),e.mergeProps({class:t.cardClass},t.attrs,r),{default:e.withCtx((o,a,r,s)=>{if(!a)return[t.$slots.header?(e.openBlock(),e.createBlock("div",{key:0,class:[t.ui.header.base,t.ui.header.padding,t.ui.header.background]},[e.renderSlot(t.$slots,"header")],2)):e.createCommentVNode("",!0),t.$slots.default?(e.openBlock(),e.createBlock("div",{key:1,class:[t.ui.body.base,t.ui.body.padding,t.ui.body.background]},[e.renderSlot(t.$slots,"default")],2)):e.createCommentVNode("",!0),t.$slots.footer?(e.openBlock(),e.createBlock("div",{key:2,class:[t.ui.footer.base,t.ui.footer.padding,t.ui.footer.background]},[e.renderSlot(t.$slots,"footer")],2)):e.createCommentVNode("",!0)];t.$slots.header?(a(`<div class="${h([t.ui.header.base,t.ui.header.padding,t.ui.header.background])}"${s}>`),b(t.$slots,"header",{},null,a,r,s),a("</div>")):a("\x3c!----\x3e"),t.$slots.default?(a(`<div class="${h([t.ui.body.base,t.ui.body.padding,t.ui.body.background])}"${s}>`),b(t.$slots,"default",{},null,a,r,s),a("</div>")):a("\x3c!----\x3e"),t.$slots.footer?(a(`<div class="${h([t.ui.footer.base,t.ui.footer.padding,t.ui.footer.background])}"${s}>`),b(t.$slots,"footer",{},null,a,r,s),a("</div>")):a("\x3c!----\x3e")}),_:3}),a)}]]);function useFetch(t,a,r){const[s={},n]="string"==typeof a?[{},a]:[a,r],i=e.computed(()=>e.toValue(t)),u=e.computed(()=>e.toValue(s.key)||"$f"+l([n,"string"==typeof i.value?i.value:"",...generateOptionSegments(s)]));if(!s.baseURL&&"string"==typeof i.value&&"/"===i.value[0]&&"/"===i.value[1])throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:d,lazy:f,default:p,transform:m,pick:h,watch:b,immediate:v,getCachedData:g,deep:y,dedupe:$,...k}=s,w=e.reactive({...o,...k,cache:"boolean"==typeof s.cache?void 0:s.cache}),x={server:d,lazy:f,default:p,transform:m,pick:h,immediate:v,getCachedData:g,deep:y,dedupe:$,watch:!1===b?[]:[...b||[],w]};if(!v){let setImmediate=function(){x.immediate=!0};e.watch(u,setImmediate,{flush:"sync",once:!0}),e.watch([...b||[],w],setImmediate,{flush:"sync",once:!0})}let S;return c(!1===b?u.value:u,()=>{var t;null==(t=null==S?void 0:S.abort)||t.call(S,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),S="undefined"!=typeof AbortController?new AbortController:{};const o=e.toValue(s.timeout);let a;o&&(a=setTimeout(()=>S.abort(new DOMException("Request aborted due to timeout.","AbortError")),o),S.signal.onabort=()=>clearTimeout(a));let r=s.$fetch||globalThis.$fetch;if(!s.$fetch){"string"==typeof i.value&&"/"===i.value[0]&&(!e.toValue(s.baseURL)||"/"===e.toValue(s.baseURL)[0])&&(r=useRequestFetch())}return r(i.value,{signal:S.signal,...w}).finally(()=>{clearTimeout(a)})},x)}function generateOptionSegments(t){var o;const a=[(null==(o=e.toValue(t.method))?void 0:o.toUpperCase())||"GET",e.toValue(t.baseURL)];for(const o of[t.params||t.query]){const t=e.toValue(o);if(!t)continue;const r={};for(const[o,a]of Object.entries(t))r[e.toValue(o)]=e.toValue(a);a.push(r)}if(t.body){const o=e.toValue(t.body);if(o)if(o instanceof ArrayBuffer)a.push(l(Object.fromEntries([...new Uint8Array(o).entries()].map(([e,t])=>[e,t.toString()]))));else if(o instanceof FormData){const e={};for(const t of o.entries()){const[o,a]=t;e[o]=a instanceof File?a.name:a}a.push(l(e))}else if(d(o))a.push(l(e.reactive(o)));else try{a.push(l(o))}catch{console.warn("[useFetch] Failed to hash body",o)}else a.push(l(o))}return a}const k=e.defineComponent({__name:"status",__ssrInlineRender:!0,async setup(t){let o,a;const{data:r}=([o,a]=e.withAsyncContext(()=>useFetch("/api/healthz","$APzUBq45As")),o=await o,a(),o),{data:s}=([o,a]=e.withAsyncContext(()=>useFetch("/api/readyz","$GAXOdpPPT-")),o=await o,a(),o);return(t,o,a,n)=>{o(f($,n,{header:e.withCtx((t,o,a,r)=>{if(!o)return[e.createVNode("h1",null,"Status")];o(`<h1${r}>Status</h1>`)}),default:e.withCtx((t,o,a,n)=>{var i,u,l,d,c,f,m,h,b,v;if(!o)return[e.createVNode("ul",{class:"space-y-1"},[e.createVNode("li",null,"commit: "+e.toDisplayString((null==(f=e.unref(r))?void 0:f.commit)||"unknown"),1),e.createVNode("li",null,"built: "+e.toDisplayString((null==(m=e.unref(r))?void 0:m.buildTime)||"unknown"),1),e.createVNode("li",null,"healthz: "+e.toDisplayString((null==(h=e.unref(r))?void 0:h.status)||"fail"),1),e.createVNode("li",null,"readyz: "+e.toDisplayString(String(null!=(v=null==(b=e.unref(s))?void 0:b.ready)&&v)),1)])];o(`<ul class="space-y-1"${n}><li${n}>commit: ${p((null==(i=e.unref(r))?void 0:i.commit)||"unknown")}</li><li${n}>built: ${p((null==(u=e.unref(r))?void 0:u.buildTime)||"unknown")}</li><li${n}>healthz: ${p((null==(l=e.unref(r))?void 0:l.status)||"fail")}</li><li${n}>readyz: ${p(String(null!=(c=null==(d=e.unref(s))?void 0:d.ready)&&c))}</li></ul>`)}),_:1},a))}}}),w=k.setup;k.setup=(t,o)=>{const a=e.useSSRContext();return(a.modules||(a.modules=new Set)).add("pages/status.vue"),w?w(t,o):void 0};export{k as default};
//# sourceMappingURL=status-uN1AjqFG.mjs.map

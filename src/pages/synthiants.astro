---
import Base from '../layouts/BaseLayout.astro';
const feed = await fetch('/api/synthiants/feed').then(r=>r.json()).catch(()=>[]);
---
<Base title="Zeropoint Protocol">
  <h2>Synthiant Feed</h2>
  <p class="lead">Human consensus interface for agentic proposals and decisions.</p>
  
  <div class="grid">
    {feed.length ? 
      feed.map((p:any) => 
        <div class="card">
          <h3>{p.title}</h3>
          <p>{p.summary}</p>
          <div class="kv">
            <div>Agent</div><div>{p.agent}</div>
            <div>Risk</div><div>{p.risk}</div>
            <div>Confidence</div><div>{Math.round(p.confidence*100)}%</div>
            <div>Status</div><div>{p.status}</div>
          </div>
        </div>
      )
    : 
      <div class="card">
        <h3>No Proposals Yet</h3>
        <p>The synthiant feed is currently empty. Proposals will appear here as they are submitted by the agentic systems.</p>
        <div class="kv">
          <div>Status</div><div class="status-ok">Ready</div>
          <div>Queue</div><div>Empty</div>
          <div>Last Check</div><div>{new Date().toISOString()}</div>
        </div>
      </div>
    }
  </div>
</Base>

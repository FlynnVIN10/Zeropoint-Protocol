---
import Base from '../layouts/BaseLayout.astro';
const [health, ready] = await Promise.all([
  fetch('/api/healthz').then(r=>r.ok?r.json():null).catch(()=>null),
  fetch('/api/readyz').then(r=>r.ok?r.json():null).catch(()=>null)
]);
---
<Base title="Status â€” Zeropoint">
  <h1 class="text-2xl font-semibold mb-4">Status</h1>
  <div class="grid gap-6 md:grid-cols-2">
    <section class="rounded-xl border border-border bg-panel p-4">
      <h3 class="font-semibold mb-2">Build</h3>
      <ul class="text-sm text-sub">
        <li>Commit: <span class="text-text">{health?.commit ?? 'unknown'}</span></li>
        <li>Built: <span class="text-text">{health?.buildTime ?? 'unknown'}</span></li>
      </ul>
    </section>
    <section class="rounded-xl border border-border bg-panel p-4">
      <h3 class="font-semibold mb-2">Probes</h3>
      <ul class="text-sm">
        <li>healthz: {health?.status === 'ok' ? 'ok' : 'fail'}</li>
        <li>readyz: {ready?.ready ? 'ready' : 'not ready'}</li>
      </ul>
    </section>
  </div>
</Base>

import{v as e,b as n,d as t,I as o,e as s,g as r,h as u,l as i}from"./server.mjs";import{E as l}from"../nitro/nitro.mjs";import{u as a}from"./asyncData-DoT6D3uG.mjs";import"../routes/renderer.mjs";import"../_/shared.esm-bundler.mjs";import"node:buffer";import"node:process";import"cloudflare:workers";import"node:events";import"node:timers";async function loadIcon(e,n){if(!e)return null;const t=u(e);if(t)return t;let o;const s=i(e).catch(()=>(console.warn(`[Icon] failed to load icon \`${e}\``),null));return n>0?await Promise.race([s,new Promise(t=>{o=setTimeout(()=>{console.warn(`[Icon] loading icon \`${e}\` timed out after ${n}ms`),t()},n)})]).finally(()=>clearTimeout(o)):await s,u(e)}function useResolvedName(n){const o=t().icon,s=(o.collections||[]).sort((e,n)=>n.length-e.length);return e.computed(()=>{var e;const t=n(),r=t.startsWith(o.cssSelectorPrefix)?t.slice(o.cssSelectorPrefix.length):t,u=(null==(e=o.aliases)?void 0:e[r])||r;if(!u.includes(":")){const e=s.find(e=>u.startsWith(e+"-"));return e?e+":"+u.slice(e.length+1):u}return u})}function resolveCustomizeFn(e,n){if(!1!==e)return!0===e||null===e?n:e}const c="NUXT_ICONS_SERVER_CSS";const m=e.defineComponent({name:"NuxtIconCss",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(o){const u=n(),i=t().icon,a=e.computed(()=>o.name?i.cssSelectorPrefix+o.name:""),m=e.computed(()=>"."+function(e){return e.replace(/([^\w-])/g,"\\$1")}(a.value));return e.onServerPrefetch(async()=>{var e;{const n=s().icon||{};if(!(null==(e=null==n?void 0:n.serverKnownCssClasses)?void 0:e.includes(a.value))){const e=await loadIcon(o.name,i.fetchTimeout).catch(()=>null);if(!e)return null;let n=u.vueApp._context.provides[c];if(n||(n=u.vueApp._context.provides[c]=new Map,u.runWithContext(()=>{r({style:[()=>{let e=Array.from(n.values()).sort().join("");return i.cssLayer&&(e=`@layer ${i.cssLayer} {${e}}`),{innerHTML:e}}]},{tagPriority:"low"})})),o.name&&!n.has(o.name)){const t=function(e,n=!0){let t=m.value;i.cssWherePseudo&&(t=`:where(${t})`);const s=l(e,{iconSelector:t,format:"compressed",customise:resolveCustomizeFn(o.customize,i.customize)});return i.cssLayer&&n?`@layer ${i.cssLayer} { ${s} }`:s}(e,!1);n.set(o.name,t)}return null}}}),()=>e.h("span",{class:["iconify",a.value]})}}),d=e.defineComponent({name:"NuxtIconSvg",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(s,{slots:r}){n();const u=t().icon,i=useResolvedName(()=>s.name),l="i-"+i.value;return i.value&&e.onServerPrefetch(async()=>{await a(l,async()=>await loadIcon(i.value,u.fetchTimeout),{deep:!1})}),()=>e.h(o,{icon:i.value,ssr:!0,customise:resolveCustomizeFn(s.customize,u.customize)},r)}}),p=e.defineComponent({name:"NuxtIcon",props:{name:{type:String,required:!0},mode:{type:String,required:!1,default:null},size:{type:[Number,String],required:!1,default:null},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(o,{slots:s}){const r=n(),u=t().icon,i=useResolvedName(()=>o.name),l=e.computed(()=>{var e;return(null==(e=r.vueApp)?void 0:e.component(i.value))||("svg"===(o.mode||u.mode)?d:m)}),a=e.computed(()=>{const e=o.size||u.size;return e?{fontSize:Number.isNaN(+e)?e:e+"px"}:null});return()=>e.h(l.value,{...u.attrs,name:i.value,class:u.class,style:a.value,customize:o.customize},s)}});export{p as default};
//# sourceMappingURL=index-CPs9Q5G9.mjs.map
